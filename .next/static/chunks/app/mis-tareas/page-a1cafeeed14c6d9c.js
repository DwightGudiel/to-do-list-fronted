(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[489],{235:function(e,a,l){Promise.resolve().then(l.bind(l,3587)),Promise.resolve().then(l.bind(l,633))},3587:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return x}});var t=l(7437),s=l(1396),n=l.n(s),i=l(4033),o=l(7713),r=l(3288),c=l(7682),d=l(2697),u=l(1524),m=l(3953),p=function(){let e=(0,i.useRouter)(),a=JSON.parse((0,o.getCookie)("usuario")),l=[{title:"Mis Tareas",src:r.Z,path:"/mis-tareas"},{title:"Usuarios",src:c.Z,path:"/usuarios"},{title:"Administrar",src:d.Z,path:"/admin"},{title:"Reportes",src:u.Z,path:"/reportes"}];return(0,t.jsx)("aside",{className:"md:w-1/10 p-5 pt-8 relative duration-300 bg-blue-600 px-5 py-10 md:overflow-y-auto md:h-screen",children:(0,t.jsxs)("header",{className:"flex flex-col justify-between h-full",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-x-4 justify-center items-center py-3",children:[(0,t.jsx)("h1",{className:"text-white origin-left font-medium text-xl duration-200 ",children:"PWG"}),(0,t.jsx)("nav",{className:"flex flex-col justify-center py-3",children:l.map((e,l)=>(0,t.jsx)("div",{children:(null==a?void 0:a.role)==="administrador"&&"Mis Tareas"!==e.title||(null==a?void 0:a.role)==="colaborador"&&"Mis Tareas"===e.title?(0,t.jsx)(n(),{href:e.path,className:"w-full my-4 rounded-md p-2 cursor-pointer transition-colors duration-300 hover:bg-gray-200 hover:text-blue-600 flex items-center text-white",children:(0,t.jsx)(e.src,{className:"h-6 w-6"})},l):null},l))})]}),(0,t.jsx)("button",{onClick:()=>{(0,o.deleteCookie)("_token"),(0,o.deleteCookie)("usuario"),e.push("/")},className:"flex text-sm gap-x-4 items-center justify-center cursor-pointer text-white p-2 rounded-sm transition-colors duration-300 hover:bg-gray-200 hover:text-blue-600",children:(0,t.jsx)(m.Z,{className:"w-8 h-8"})})]})})},h=l(2265),x=function(e){let{children:a}=e,[l,s]=(0,h.useState)(null),n=(0,i.useRouter)();return(0,h.useEffect)(()=>{let e=(0,o.getCookie)("_token");s(e),e||n.push("/")},[n]),(0,t.jsx)(t.Fragment,{children:l?(0,t.jsxs)("div",{className:"md:flex md:min-h-screen",children:[(0,t.jsx)(p,{}),(0,t.jsx)("main",{className:"md:w-full   md:h-screen overflow-auto p-10",children:a})]}):(0,t.jsx)("main",{className:"flex justify-center items-center min-h-screen",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h1",{className:"text-center text-4xl font-black text-gray-700",children:"Cargando P\xe1gina..."}),(0,t.jsx)("div",{className:"mt-4 flex justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-blue-500"})})]})})})}},2128:function(e,a,l){"use strict";l.d(a,{E:function(){return s},i:function(){return t}});let t=e=>new Date(e+"T00:00:00Z").toLocaleDateString("es-GT",{day:"numeric",month:"numeric",year:"numeric",timeZone:"UTC"});function s(e){if(e<60)return"".concat(e," min");{let a=Math.floor(e/60),l=e%60;return 0===l?"".concat(a," hrs"):"".concat(a," hrs ").concat(l," min")}}},633:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return h}});var t=l(7437),s=l(2265),n=l(7713),i=l(2173),o=l(2128),r=e=>{let{tarea:a,handleCambiarEstadoTarea:l}=e,[n,i]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{i("completada"===a.estado)},[a.estado]),(0,t.jsx)("li",{className:"border-b py-2 my-5",children:(0,t.jsxs)("div",{className:"grid grid-cols-12 justify-center items-center ".concat(n|(null==a?void 0:a.estado)==="completada"?"line-through":""),children:[(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-blue-500",onChange:e=>{let t=e.target.checked;console.log(t),i(t),l(a.id,t)},checked:n})}),(0,t.jsx)("div",{className:"col-span-10",children:(0,t.jsxs)("p",{className:"ml-3 text-sm",children:[" ",(0,t.jsx)("span",{className:"font-bold capitalize",children:"".concat(null==a?void 0:a.plataforma," - ").concat((0,o.i)(null==a?void 0:a.fecha_vencimiento)," - ").concat((0,o.E)(null==a?void 0:a.hora),":")})," ",null==a?void 0:a.descripcion]})})]})})},c=l(9806),d=e=>{let{tarea:a,handleCompletarTarea:l,setShowModal:s,handleUpdate:n}=e,i=e=>{l(e)},r=e=>{n&&(s(!0),n(e))};return(0,t.jsx)("li",{className:"border-b py-2 my-5",children:(0,t.jsxs)("div",{className:"grid grid-cols-12 justify-center items-center ".concat("completada"===a.estado?"line-through":""),children:[(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)("input",{type:"checkbox",className:"form-checkbox h-4 w-4 text-blue-500",onClick:()=>i(a.id),checked:"completada"===a.estado})}),(0,t.jsx)("div",{className:"col-span-10",children:(0,t.jsxs)("p",{className:"ml-3 text-sm",children:[" ",(0,t.jsx)("span",{className:"font-bold capitalize",children:"".concat(null==a?void 0:a.plataforma," - ").concat((0,o.i)(null==a?void 0:a.fecha_vencimiento)," - ").concat((0,o.E)(null==a?void 0:a.hora),":")})," ",null==a?void 0:a.descripcion]})}),(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)("button",{className:"text-blue-800",onClick:()=>r(null==a?void 0:a.id),children:(0,t.jsx)(c.Z,{className:"h-5 w-5 text-blue-600 font-black cursor-pointer"})})})]})})},u=l(171),m=l(2906),p=l(7800),h=function(){let e=new Date,a=6e4*e.getTimezoneOffset(),l=new Date(e-a).toISOString().split("T")[0],[o,c]=(0,s.useState)(l),[h,x]=(0,s.useState)(""),[v,b]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),g=JSON.parse((0,n.getCookie)("usuario")),[w,N]=(0,s.useState)([]),[y,C]=(0,s.useState)([]),[S,k]=(0,s.useState)([]),[T,Z]=(0,s.useState)(!1),[G,z]=(0,s.useState)({}),[E,_]=(0,s.useState)(!1),A=async()=>{try{let e="https://webdevgt.com/pwg/public/api/tareas/".concat(null==g?void 0:g.id),a=await (0,i.Z)(e),l=a.data.filter(e=>(null==e?void 0:e.estado)==="pendiente");console.log("uwu",l),N(l),P(a.data)}catch(e){console.log(e)}},M=async()=>{try{let e="https://webdevgt.com/pwg/public/api/tareas-atrasadas/".concat(null==g?void 0:g.id),a=(await (0,i.Z)(e)).data;k(a)}catch(e){console.log(e)}},P=e=>{C(e.filter(e=>(null==e?void 0:e.estado)==="completada"))},O=async e=>{e.preventDefault();try{_(!0);let e={users_id:g.id,descripcion:h.trim(),plataforma:v.trim(),estado:"pendiente",fecha_vencimiento:o,hora:f};if(""===e.descripcion||""===e.plataforma||""===f){_(!1),u.toast.error("Todos los campos son obligatorios");return}let a=await i.Z.post("https://webdevgt.com/pwg/public/api/tareas/crear",e);await A(),x(""),b(""),j(""),_(!1),u.toast.success("La tarea fue creada exitosamente"),console.log(a)}catch(e){_(!1),console.log(e)}},R=async e=>{try{let a=await i.Z.post("https://webdevgt.com/pwg/public/api/tarea/completar/".concat(e),{estado:"completada"});console.log(a),await A(),await M()}catch(e){console.log(e)}},F=async(e,a)=>{try{let l=await i.Z.post("https://webdevgt.com/pwg/public/api/tarea/completar/".concat(e),{estado:a?"completada":"pendiente"});console.log(l),await A(),await M()}catch(e){console.log(e)}},L=async e=>{try{console.log(e),await i.Z.put("https://webdevgt.com/pwg/public/api/tarea/".concat(e.id),e),Z(!1),await A(),await M(),u.toast.success("Tarea actualizada con exito")}catch(e){console.log(e)}},V=e=>{let a=S.find(a=>a.id===e),l=w.find(a=>a.id===e);a?z(a):l?z(l):z({}),Z(!0)};return(0,s.useEffect)(()=>{A(),M()},[]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[" ",(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Mis Tareas"})," ",(0,t.jsx)("p",{className:"text-xl font-bold mb-4",children:null==g?void 0:g.name})]}),(0,t.jsxs)("div",{className:" bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold mb-4 text-red-600",children:["Tareas Atrasadas: ",S.length]})," ",(0,t.jsx)("ul",{className:"md:overflow-y-auto",children:S.map((e,a)=>(0,t.jsx)(d,{tarea:e,handleCompletarTarea:R,setShowModal:Z,handleUpdate:V},a))})]}),(0,t.jsxs)("div",{className:"w-full bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4 mt-10",children:[(0,t.jsx)("h2",{className:"text-lg font-bold mb-4 text-gray-700",children:"Nueva Tarea"})," ",(0,t.jsxs)("form",{onSubmit:O,children:[(0,t.jsxs)("div",{className:"flex gap-6 shadow appearance-none border rounded text-sm",children:[(0,t.jsx)("input",{className:"w-10/12 py-4 px-3 text-sm leading-tight focus:outline-none focus:shadow-outline",type:"text",id:"descripcion",name:"descripcion",placeholder:"A\xf1ade una nueva tarea",value:h,onChange:e=>x(e.target.value)}),(0,t.jsxs)("select",{className:"w-2/12 focus:outline-none text-sm ",id:"plataforma",name:"plataforma",value:v,onChange:e=>b(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Plataforma"}),(0,t.jsx)("option",{value:"atulado",children:"Atulado"}),(0,t.jsx)("option",{value:"caplin",children:"Caplin"}),(0,t.jsx)("option",{value:"lancasco",children:"Lancasco"}),(0,t.jsx)("option",{value:"gutis GT",children:"Gutis GT"}),(0,t.jsx)("option",{value:"gutis regional",children:"Gutis Regional"}),(0,t.jsx)("option",{value:"gutis CR",children:"Gutis CR"}),(0,t.jsx)("option",{value:"medpharma",children:"Medpharma"}),(0,t.jsx)("option",{value:"farmadina",children:"Farmadina"}),(0,t.jsx)("option",{value:"farmadina",children:"La Sante"}),(0,t.jsx)("option",{value:"global farma",children:"Global Farma"}),(0,t.jsx)("option",{value:"silanes",children:"Silanes"}),(0,t.jsx)("option",{value:"mi salud",children:"Mi Salud"}),(0,t.jsx)("option",{value:"plan esperanza",children:"Plan Esperanza"}),(0,t.jsx)("option",{value:"hadalabs",children:"Hadalabs"}),(0,t.jsx)("option",{value:"promefa",children:"Promefa"}),(0,t.jsx)("option",{value:"apac",children:"Apac"}),(0,t.jsx)("option",{value:"gruner",children:"Gruner"}),(0,t.jsx)("option",{value:"topfarma",children:"Top Farma"}),(0,t.jsx)("option",{value:"vizcaino",children:"Vizcaino"}),(0,t.jsx)("option",{value:"bienestar",children:"Bienestar"}),(0,t.jsx)("option",{value:"otros",children:"Otros"})]}),(0,t.jsx)("input",{className:"w-2/12 focus:outline-none text-sm",type:"date",id:"fecha_vencimiento",name:"fecha_vencimiento",value:o,onChange:e=>c(e.target.value)}),(0,t.jsxs)("select",{className:"w-2/12 focus:outline-none text-sm",id:"hora",name:"hora",value:f,onChange:e=>j(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Hora"}),(0,t.jsx)("option",{value:"5",children:"5 min"}),(0,t.jsx)("option",{value:"10",children:"10 min"}),(0,t.jsx)("option",{value:"15",children:"15 min"}),(0,t.jsx)("option",{value:"20",children:"20 min"}),(0,t.jsx)("option",{value:"25",children:"25 min"}),(0,t.jsx)("option",{value:"30",children:"30 min"}),(0,t.jsx)("option",{value:"40",children:"40 min"}),(0,t.jsx)("option",{value:"50",children:"50 min"}),(0,t.jsx)("option",{value:"60",children:"1 hr"}),(0,t.jsx)("option",{value:"120",children:"2 hrs"}),(0,t.jsx)("option",{value:"240",children:"4 hrs"}),(0,t.jsx)("option",{value:"360",children:"6 hrs"}),(0,t.jsx)("option",{value:"480",children:"8 hrs"})]})]}),(0,t.jsx)("input",{type:"submit",value:E?"Enviando.........":"A\xf1adir Tarea",disabled:E,className:"bg-blue-500 text-sm hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-2"})]})]}),(0,t.jsxs)("div",{className:" bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4 mt-10",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold mb-4 text-blue-600",children:["Tareas Actuales: ",w.length]})," ",(0,t.jsx)("ul",{className:"md:overflow-y-auto",children:w.map((e,a)=>(0,t.jsx)(d,{tarea:e,handleCompletarTarea:R,setShowModal:Z,handleUpdate:V},a))})]}),(0,t.jsxs)("div",{className:" bg-white shadow-lg rounded px-8 pt-6 pb-8 mb-4 mt-10",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold mb-4 text-green-600",children:["Tareas Completadas: ",y.length]})," ",(0,t.jsx)("ul",{className:"md:overflow-y-auto",children:y.map(e=>(0,t.jsx)(r,{tarea:e,handleCambiarEstadoTarea:F},null==e?void 0:e.id))})]}),(0,t.jsxs)(m.Z,{isOpen:T,onClose:()=>{Z(!1)},children:[(0,t.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Actualizar Tarea"}),(0,t.jsx)(p.Z,{inputs:[{name:"descripcion",placeholder:"A\xf1ade una nueva tarea",type:"text",pattern:{value:/^(?!\s+$).+/,message:"La descripcion no puede contener solo espacios en blanco"}},{name:"plataforma",type:"select",options:[{value:"",label:"Plataforma"},{value:"atulado",label:"Atulado"},{value:"caplin",label:"Caplin"},{value:"lancasco",label:"Lancasco"},{value:"gutis GT",label:"Gutis GT"},{value:"gutis regional",label:"Gutis Regional"},{value:"gutis CR",label:"Gutis CR"},{value:"medpharma",label:"Medpharma"},{value:"farmadina",label:"Farmadina"},{value:"La Sante",label:"La Sante"},{value:"global farma",label:"Global Farma"},{value:"silanes",label:"Silanes"},{value:"mi salud",label:"Mi Salud"},{value:"plan esperanza",label:"Plan Esperanza"},{value:"hadalabs",label:"Hadalabs"},{value:"promefa",label:"Promefa"},{value:"apac",label:"Apac"},{value:"gruner",label:"Gruner"},{value:"topfarma",label:"Top Farma"},{value:"vizcaino",label:"Vizcaino"},{value:"bienestar",label:"Bienestar"},{value:"otros",label:"Otros"}]},{name:"estado",type:"select",options:[{value:"pendiente",label:"Pendiente"},{value:"completada",label:"Completada"},{value:"atrasada",label:"Atrasada"}]},{name:"fecha_vencimiento",type:"date"},{name:"hora",type:"select",options:[{value:"",label:"Hora"},{value:"5",label:"5 min"},{value:"10",label:"10 min"},{value:"15",label:"15 min"},{value:"20",label:"20 min"},{value:"25",label:"25 min"},{value:"30",label:"30 min"},{value:"40",label:"40 min"},{value:"50",label:"50 min"},{value:"60",label:"1 hr"},{value:"120",label:"2 hrs"},{value:"240",label:"4 hrs"},{value:"360",label:"6 hrs"},{value:"480",label:"8 hrs"}]}],onSubmit:L,initialValues:G})]})]})}},7800:function(e,a,l){"use strict";var t=l(7437),s=l(2265),n=l(1865);a.Z=function(e){let{onSubmit:a,inputs:l,initialValues:i}=e,[o,r]=(0,s.useState)(!1),{register:c,handleSubmit:d,formState:{errors:u},reset:m}=(0,n.cI)(i),p=async e=>{r(!0),await a(e),r(!1)};return(0,s.useEffect)(()=>{m(i)},[i,m]),(0,t.jsx)("div",{className:"overflow-y-auto max-h-[80vh]",children:(0,t.jsxs)("form",{onSubmit:d(p),noValidate:!0,className:"space-y-4",children:[l.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-bold text-sm text-gray-600",children:e.label}),"select"===e.type?(0,t.jsx)("select",{...c(e.name,{required:e.required}),className:"block w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500",defaultValue:e.defaultValue,children:e.options.map(e=>(0,t.jsx)("option",{value:e.value,className:"capitalize",children:e.label},e.value))}):(0,t.jsx)("input",{...c(e.name,{required:e.required,pattern:e.pattern,min:e.min,max:e.max}),className:"block w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-blue-500 focus:border-blue-500",type:e.type,placeholder:e.placeholder}),u[e.name]&&(0,t.jsx)("div",{className:"p-4 mb-4 text-sm  rounded-lg bg-red-100 text-red-800 mt-2",role:"alert",children:(0,t.jsx)("span",{className:"font-medium",children:u[e.name].message})})]},e.name)),(0,t.jsx)("input",{type:"submit",value:o?"Enviando.........":"enviar",disabled:o,className:"w-full cursor-pointer bg-blue-500 hover:bg-blue-600 focus:ring-blue-500 focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg text-white py-2 px-4 text-sm font-medium"})]})})}},2906:function(e,a,l){"use strict";var t=l(7437),s=l(4027);a.Z=function(e){let{isOpen:a,onClose:l,children:n}=e;return(0,t.jsx)(t.Fragment,{children:a&&(0,t.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 p-10",children:(0,t.jsxs)("div",{className:"bg-white p-5 rounded-lg w-full xl:w-96",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:l,className:"bg-red-500 p-1 rounded-lg hover:bg-red-400 focus:outline-none",children:(0,t.jsx)(s.Z,{className:"h-5 w-5 text-white"})})}),n,(0,t.jsx)("div",{className:"flex justify-end mt-4",children:(0,t.jsx)("button",{type:"button",onClick:l,className:"bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded-lg text-gray-800 font-medium mr-2 transition-colors duration-300 ease-in-out",children:"Cancelar"})})]})})})}}},function(e){e.O(0,[926,173,557,971,938,744],function(){return e(e.s=235)}),_N_E=e.O()}]);