(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{5403:function(e,t,r){Promise.resolve().then(r.bind(r,334))},334:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=r(7437),a=r(2265),s=r(3587),o=function(e){let{onFilterChange:t,usuarios:r}=e,[s,o]=(0,a.useState)("todas"),[l,i]=(0,a.useState)("todos"),c=r.filter(e=>(null==e?void 0:e.role)==="colaborador");return(0,a.useEffect)(()=>{t({selectedStatus:s,selectedUser:l})},[s,l,t]),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h3",{className:"text-2xl font-bold mb-4 my-10",children:"Filtros"}),(0,n.jsxs)("div",{className:"flex items-center flex-col md:flex-row gap-4",children:[(0,n.jsx)("label",{className:"font-bold",htmlFor:"",children:"Estado: "}),(0,n.jsxs)("select",{className:"form-select block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",value:s,onChange:e=>{o(e.target.value)},children:[(0,n.jsx)("option",{value:"todas",children:"Todas"}),(0,n.jsx)("option",{value:"atrasada",children:"Atrasada"}),(0,n.jsx)("option",{value:"completada",children:"Completada"}),(0,n.jsx)("option",{value:"pendiente",children:"Pendiente"})]}),(0,n.jsx)("label",{className:"font-bold",htmlFor:"",children:"Usuario: "}),(0,n.jsxs)("select",{className:"form-select block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding bg-no-repeat border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",value:l,onChange:e=>{i(e.target.value)},children:[(0,n.jsx)("option",{value:"todos",children:"Todos"}),c.map(e=>(0,n.jsx)("option",{value:"".concat(null==e?void 0:e.name),children:null==e?void 0:e.name},null==e?void 0:e.id))]})]})]})},l=r(7713),i=r(4033),c=r(2173),d=r(7516),u=r.n(d),m=function(e){let{data:t,loading:r,headers:a,columns:s}=e;return 0===t.length?(0,n.jsx)(n.Fragment,{children:r?(0,n.jsx)("div",{className:"flex items-center justify-center h-20",children:(0,n.jsx)(u(),{loading:r})}):(0,n.jsx)("p",{className:"text-center font-black text-2xl text-gray-700",children:"No hay datos"})}):(0,n.jsx)(n.Fragment,{children:r?(0,n.jsx)("div",{className:"flex items-center justify-center h-20",children:(0,n.jsx)(u(),{loading:r})}):(0,n.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,n.jsx)("thead",{className:"text-sm uppercase bg-blue-500 text-white",children:(0,n.jsx)("tr",{children:a.map(e=>(0,n.jsx)("th",{scope:"col",className:"px-6 py-3",children:e.label},e.key))})}),(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsx)("tr",{className:"hover:bg-gray-100 border ",children:s.map(t=>(0,n.jsx)("td",{className:"px-6 py-4",children:t.render(e)},t.key))},e.id))})]})})},h=r(2128),f=function(){let e=(0,l.getCookie)("usuario"),t=(0,i.useRouter)(),[r,d]=(0,a.useState)([]),[u,f]=(0,a.useState)(!1),[p,x]=(0,a.useState)([]),[b,v]=(0,a.useState)({selectedStatus:"todas",selectedUser:"todos"}),g=async()=>{try{f(!0);let e=await (0,c.Z)("https://webdevgt.com/pwg/public/api/tareas");f(!1),d(e.data)}catch(e){console.log(e)}},j=async()=>{try{f(!0);let e=await (0,c.Z)("https://webdevgt.com/pwg/public/api/users");f(!1),x(e.data)}catch(e){console.log(e)}},y=(0,a.useCallback)(e=>{v(e),j()},[v]),w=(0,a.useMemo)(()=>r.filter(e=>{var t;let r="todas"===b.selectedStatus||e.estado===b.selectedStatus,n="todos"===b.selectedUser||(null===(t=e.user)||void 0===t?void 0:t.name)===b.selectedUser;return r&&n}),[r,b.selectedStatus,b.selectedUser]),N=Object.values((e=>{let t=new Date().toISOString().split("T")[0];return e.reduce((e,r)=>{var n,a,s;let o=null===(n=r.user)||void 0===n?void 0:n.id,l=r.fecha_vencimiento;if(o&&"number"==typeof r.hora&&l&&("pendiente"!==r.estado||"pendiente"===r.estado&&new Date(l)<=new Date(t))){let t=((null===(a=e[o])||void 0===a?void 0:a.horasTotales)||0)+r.hora;e[o]={userId:o,nombre:null===(s=p.find(e=>e.id===parseInt(o)))||void 0===s?void 0:s.name,horasTotales:t}}return e},{})})(w));(0,a.useEffect)(()=>{g()},[]);let k=JSON.parse(null!=e?e:"{}");return(0,a.useEffect)(()=>{if(!e){t.push("/");return}},[]),(0,n.jsx)(s.default,{children:(null==k?void 0:k.role)!=="colaborador"?(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4 my-10",children:"Administra las tareas"}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-6",children:N.map(e=>(0,n.jsx)("div",{className:"max-w-sm mx-auto bg-white rounded-lg overflow-hidden shadow-md mb-4",children:(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h2",{className:"text-xl font-bold mb-2 text-gray-800 text-center",children:e.nombre}),(0,n.jsx)("p",{className:"text-gray-600 font-bold text-xl",children:"".concat((0,h.E)(e.horasTotales))})]})},e.userId))}),(0,n.jsx)(o,{usuarios:p,onFilterChange:y}),(0,n.jsx)(m,{headers:[{key:1,label:"Descripcion"},{key:2,label:"Horas"},{key:3,label:"Estado"},{key:4,label:"Colaborador"}],columns:[{key:"descripcion",render:e=>(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:"ml-3 text-sm",children:[" ",(0,n.jsx)("span",{className:"font-bold capitalize",children:"".concat(null==e?void 0:e.plataforma," - ").concat((0,h.i)(null==e?void 0:e.fecha_vencimiento)," - ")}),null==e?void 0:e.descripcion]})})},{key:"hora",render:e=>(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"ml-3 text-sm",children:(0,h.E)(null==e?void 0:e.hora)})})},{key:"estado",render:e=>(0,n.jsx)("div",{children:(0,n.jsx)("span",{className:"".concat("completada"===e.estado?"bg-green-100 text-green-800 border-green-400":"atrasada"===e.estado?"bg-red-100 text-red-800 border-red-400 ":"bg-blue-100 text-blue-800 border-blue-400"," text-xs font-medium me-2 px-2.5 py-0.5 rounded border"),children:null==e?void 0:e.estado})})},{key:"usuario",render:e=>{var t;return(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"font-bold",children:null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.name})})}}],data:w,loading:u})]}):(0,n.jsx)("div",{children:(0,n.jsx)("h1",{className:"text-center font-black text-4xl my-10 text-gray-700",children:"Esta ruta esta protegida, \xa1No eres un administrador!"})})})}},3587:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(7437),a=r(1396),s=r.n(a),o=r(4033),l=r(7713),i=r(3288),c=r(7682),d=r(2697),u=r(1524),m=r(3953),h=function(){let e=(0,o.useRouter)(),t=JSON.parse((0,l.getCookie)("usuario")),r=[{title:"Mis Tareas",src:i.Z,path:"/mis-tareas"},{title:"Usuarios",src:c.Z,path:"/usuarios"},{title:"Administrar",src:d.Z,path:"/admin"},{title:"Reportes",src:u.Z,path:"/reportes"}];return(0,n.jsx)("aside",{className:"md:w-1/10 p-5 pt-8 relative duration-300 bg-blue-600 px-5 py-10 md:overflow-y-auto md:h-screen",children:(0,n.jsxs)("header",{className:"flex flex-col justify-between h-full",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-x-4 justify-center items-center py-3",children:[(0,n.jsx)("h1",{className:"text-white origin-left font-medium text-xl duration-200 ",children:"PWG"}),(0,n.jsx)("nav",{className:"flex flex-col justify-center py-3",children:r.map((e,r)=>(0,n.jsx)("div",{children:(null==t?void 0:t.role)==="administrador"&&"Mis Tareas"!==e.title||(null==t?void 0:t.role)==="colaborador"&&"Mis Tareas"===e.title?(0,n.jsx)(s(),{href:e.path,className:"w-full my-4 rounded-md p-2 cursor-pointer transition-colors duration-300 hover:bg-gray-200 hover:text-blue-600 flex items-center text-white",children:(0,n.jsx)(e.src,{className:"h-6 w-6"})},r):null},r))})]}),(0,n.jsx)("button",{onClick:()=>{(0,l.deleteCookie)("_token"),(0,l.deleteCookie)("usuario"),e.push("/")},className:"flex text-sm gap-x-4 items-center justify-center cursor-pointer text-white p-2 rounded-sm transition-colors duration-300 hover:bg-gray-200 hover:text-blue-600",children:(0,n.jsx)(m.Z,{className:"w-8 h-8"})})]})})},f=r(2265),p=function(e){let{children:t}=e,[r,a]=(0,f.useState)(null),s=(0,o.useRouter)();return(0,f.useEffect)(()=>{let e=(0,l.getCookie)("_token");a(e),e||s.push("/")},[s]),(0,n.jsx)(n.Fragment,{children:r?(0,n.jsxs)("div",{className:"md:flex md:min-h-screen",children:[(0,n.jsx)(h,{}),(0,n.jsx)("main",{className:"md:w-full md:h-screen overflow-auto p-10",children:t})]}):(0,n.jsx)("main",{className:"flex justify-center items-center min-h-screen",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h1",{className:"text-center text-4xl font-black text-gray-700",children:"Cargando P\xe1gina..."}),(0,n.jsx)("div",{className:"mt-4 flex justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-blue-500"})})]})})})}},2128:function(e,t,r){"use strict";r.d(t,{E:function(){return a},i:function(){return n}});let n=e=>new Date(e+"T00:00:00Z").toLocaleDateString("es-GT",{day:"numeric",month:"numeric",year:"numeric",timeZone:"UTC"});function a(e){if(e<60)return"".concat(e," min");{let t=Math.floor(e/60),r=e%60;return 0===r?"".concat(t," hrs"):"".concat(t," hrs ").concat(r," min")}}},7516:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return s(t,e),t},l=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(2265)),c=r(581),d=(0,r(9981).createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");t.default=function(e){var t=e.loading,r=e.color,a=void 0===r?"#000000":r,s=e.speedMultiplier,o=e.cssOverride,u=e.size,m=void 0===u?35:u,h=l(e,["loading","color","speedMultiplier","cssOverride","size"]),f=n({background:"transparent !important",width:(0,c.cssValue)(m),height:(0,c.cssValue)(m),borderRadius:"100%",border:"2px solid",borderTopColor:a,borderBottomColor:"transparent",borderLeftColor:a,borderRightColor:a,display:"inline-block",animation:"".concat(d," ").concat(.75/(void 0===s?1:s),"s 0s infinite linear"),animationFillMode:"both"},void 0===o?{}:o);return void 0===t||t?i.createElement("span",n({style:f},h)):null}},9981:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimation=void 0,t.createAnimation=function(e,t,r){var n="react-spinners-".concat(e,"-").concat(r);if("undefined"==typeof window||!window.document)return n;var a=document.createElement("style");document.head.appendChild(a);var s=a.sheet,o="\n    @keyframes ".concat(n," {\n      ").concat(t,"\n    }\n  ");return s&&s.insertRule(o,0),n}},581:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssValue=t.parseLengthAndUnit=void 0;var r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function n(e){if("number"==typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var a=(e.match(/[^0-9]*$/)||"").toString();return r[a]?{value:t,unit:a}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}t.parseLengthAndUnit=n,t.cssValue=function(e){var t=n(e);return"".concat(t.value).concat(t.unit)}}},function(e){e.O(0,[926,173,971,938,744],function(){return e(e.s=5403)}),_N_E=e.O()}]);